<?xml version="1.0" encoding="ISO-8859-1"?>

<project name="cmakeant" basedir="." default="jar">

	<property name="src.dir" value="src" />
	<property name="classes.dir" value="classes" />

	<target name="clean" description="Delete all generated files">
		<delete dir="${classes.dir}/*" failonerror="false" />
		<delete file="${ant.project.name}.jar" />
	</target>

	<target name="compile" description="Compiles the Task">
		<mkdir dir="${classes.dir}" />
		<javac srcdir="${src.dir}" destdir="${classes.dir}" classpath="./lib/ant.jar" />
	</target>

	<target name="jar" description="JARs the Task" depends="compile">
		<jar destfile="${ant.project.name}.jar" basedir="classes">
			<manifest>
				<section name="org.iainhull.ant">
					<attribute name="Specification-Title" value="Cmake Ant" />
					<attribute name="Specification-Version" value="${version}" />
					<attribute name="Specification-Vendor" value="Iain Hull" />
					<attribute name="Implementation-Title" value="Cmake Ant" />
					<attribute name="Implementation-Version" value="${version} ${TODAY}" />
					<attribute name="Implementation-Vendor" value="Iain Hull" />
				</section>
			</manifest>
		</jar>
	</target>

	<target name="test" description="Test the task" depends="jar">
		<taskdef name="cmake" classname="org.iainhull.ant.CmakeBuilder" classpath="${ant.project.name}.jar"/>
		<cmake sourceDir="cmake/src" binaryDir="cmake/binary">
			<generator name="KDevelop3" />
			<generator name="Unix Makefiles" platform="linux" />
		</cmake>
	</target>

</project>